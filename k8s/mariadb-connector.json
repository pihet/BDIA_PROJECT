# Amazon MSK / RDS 로 전환 시
# - `database.hostname` -> RDS 엔드포인트
# - `schema.history.internal.kafka.bootstrap.servers` -> MSK bootstrap (SASL 설정은 별도 Config 사용)
# - 로컬 쿠버네티스에서만 이 ConfigMap을 적용하며, AWS에서는 Debezium Connect(or MSK Connect)쪽에 동일 JSON을 업로드
apiVersion: v1
kind: ConfigMap
metadata:
  name: mariadb-connector-spec
  labels:
    app: kafka-connect
data:
  mariadb-connector.json: |
    {
      "name": "mariadb-source-connector",
      "config": {
        "connector.class": "io.debezium.connector.mysql.MySqlConnector",
        "tasks.max": "1",
        "database.hostname": "mariadb-internal-service.default.svc.cluster.local",
        "database.port": "3306",
        "database.user": "debezium_user",
        "database.password": "debezium_pw",
        "database.server.id": "1000",
        "database.server.name": "fulfillment",
        "database.include.list": "inventory_db",
        "topic.prefix": "mariadb.fulfillment",
        "schema.history.internal.kafka.bootstrap.servers": "kafka-0.kafka-headless-service.default.svc.cluster.local:9092",
        "schema.history.internal.kafka.topic": "schema-changes.inventory_db",
        "table.include.list": "inventory_db.products,inventory_db.orders",
        "decimal.handling.mode": "double"
      }
    }